{"version":3,"file":"aja.js","sources":["../src/utils/util.ts","../src/store.ts","../src/aja.ts"],"sourcesContent":["/**\r\n * 获取DOM元素\r\n * @param s\r\n */\r\nexport function qs(s: string): Element | null {\r\n  return document.querySelector(s);\r\n}\r\n\r\n/**\r\n * [title]=\"title\"\r\n * @param value\r\n */\r\nexport function attrp(value: string) {\r\n  return /^\\[\\w.+\\]$/.test(value);\r\n}\r\n\r\n/**\r\n * (click)=\"hello('hello')\"\r\n */\r\nexport function eventp(value: string) {\r\n  return /^\\(\\w.+\\)$/.test(value);\r\n}\r\n\r\n/**\r\n * #input 模板变量\r\n * @param value\r\n */\r\nexport function tempvarp(value: string) {\r\n  return value[0] === \"#\";\r\n}\r\n\r\nexport function createRoot(view: string | HTMLElement): HTMLElement | null {\r\n  return typeof view === \"string\"\r\n    ? document.querySelector<HTMLElement>(view)\r\n    : view;\r\n}\r\n","const l = console.log;\r\n\r\n/**\r\n * state 对象\r\n */\r\nexport interface State {\r\n  [key: string]: any;\r\n}\r\n\r\n/**\r\n * 事件函数对象\r\n */\r\nexport interface Actions {\r\n  [key: string]: Function;\r\n}\r\n\r\n/**\r\n * 计算函数\r\n */\r\nexport interface Computeds {\r\n  [key: string]: Function;\r\n}\r\n\r\nexport interface Store {\r\n  state?: State;\r\n  actions?: Actions;\r\n  computeds?: Computeds;\r\n}\r\nconst listeners: Function[] = [];\r\n\r\nexport const autorun = (f: Function) => {\r\n  f();\r\n  listeners.push(f);\r\n};\r\n\r\nexport function createState(obj?: State): State {\r\n  return obj ? obj : {};\r\n}\r\nexport function createActions(obj?: Actions): Actions {\r\n  return obj ? obj : {};\r\n}\r\nexport function createComputeds(obj?: Computeds): Computeds {\r\n  return obj ? obj : {};\r\n}\r\n\r\nexport function createStore({ state, computeds, actions }: Store): any {\r\n  let _result: Object = {};\r\n  for (let k in state) {\r\n    // 将所有state，重新代理\r\n    Object.defineProperty(_result, k, {\r\n      get: function proxyGetter() {\r\n        let value;\r\n        if (typeof state[k] === \"object\") {\r\n          value = createStore({\r\n            state: state[k]\r\n          });\r\n        } else {\r\n          value = state[k];\r\n        }\r\n        return value;\r\n      },\r\n      set: function proxySetter(value) {\r\n        state[k] = value;\r\n        // 设置的时候调用回调\r\n        for (const f of listeners) {\r\n          f();\r\n        }\r\n      },\r\n      enumerable: true,\r\n      configurable: true\r\n    });\r\n  }\r\n  for (let k in computeds) {\r\n    Object.defineProperty(_result, k, {\r\n      get: function proxyGetter() {\r\n        return computeds[k].call(this);\r\n      }\r\n    });\r\n  }\r\n  Object.assign(_result, actions);\r\n  return _result;\r\n}\r\n","import { qs, attrp, eventp, tempvarp, createRoot } from \"./utils/util\";\r\nimport {\r\n  createStore,\r\n  autorun,\r\n  Computeds,\r\n  createState,\r\n  createActions,\r\n  createComputeds,\r\n  Actions,\r\n  State,\r\n  Store\r\n} from \"./store\";\r\n\r\nconst l = console.log;\r\nconst templateVariables: {\r\n  [key: string]: ChildNode | Element | HTMLElement;\r\n} = {};\r\n\r\n/**\r\n * *  指令前缀\r\n * [:for] [:if]\r\n */\r\nexport const instructionPrefix = \":\";\r\n\r\nfunction ifp(key: string): boolean {\r\n  return key === instructionPrefix + \"if\";\r\n}\r\n\r\nfunction forp(key: string): boolean {\r\n  return key === instructionPrefix + \"for\";\r\n}\r\n\r\n// 扫描\r\nexport function define(\r\n  view: string | HTMLElement,\r\n  model: Store\r\n): null | {\r\n  [key: string]: any;\r\n} {\r\n  const state = createState(model.state);\r\n  const actions = createActions(model.actions);\r\n  const computeds = createComputeds(model.computeds);\r\n  const _result = createStore({\r\n    state,\r\n    actions,\r\n    computeds\r\n  });\r\n\r\n  const root = createRoot(view);\r\n  if (root === null) return null;\r\n\r\n  const children = Array.from(root.childNodes);\r\n  for (let index = 0; index < children.length; index++) {\r\n    const childNode = children[index];\r\n\r\n    // dom节点\r\n    if (\r\n      childNode.nodeType === Node.ELEMENT_NODE ||\r\n      childNode.nodeType === Node.DOCUMENT_FRAGMENT_NODE\r\n    ) {\r\n      const htmlElement: HTMLElement = childNode as HTMLElement;\r\n\r\n      //* 遍历节点熟悉\r\n      // :if权限最大\r\n      const attrs: Attr[] =\r\n        Array.from((childNode as HTMLElement).attributes) || [];\r\n\r\n      let depath = true;\r\n      for (const { name, value } of attrs) {\r\n        if (ifp(name)) {\r\n          autorun(() => {\r\n            if (!_result[value]) {\r\n              htmlElement.style.display = \"none\";\r\n              depath = false;\r\n            } else {\r\n              htmlElement.style.display = \"block\";\r\n              depath = true;\r\n              if (depath && Array.from(childNode.childNodes).length) {\r\n                define(htmlElement, model);\r\n              }\r\n            }\r\n          });\r\n        }\r\n\r\n        if (attrp(name)) {\r\n          let attrName = name.replace(/^\\[/, \"\").replace(/\\]$/, \"\");\r\n          autorun(() => {\r\n            if (attrName === \"style\") {\r\n              const styles: CSSStyleDeclaration = _result[value];\r\n              for (const key in styles) {\r\n                if (Object.getOwnPropertyDescriptor(htmlElement.style, key)) {\r\n                  const _value = styles[key];\r\n                  if (_value) {\r\n                    htmlElement.style[key] = _value;\r\n                  }\r\n                }\r\n              }\r\n            } else {\r\n              htmlElement.setAttribute(attrName, _result[value]); // 属性扫描绑定\r\n            }\r\n          });\r\n        }\r\n        if (eventp(name)) {\r\n          // 绑定的事件: (click)=\"echo('hello',$event)\"\r\n          let len = name.length;\r\n          let eventName = name.substr(1, len - 2); // (click) -> click\r\n\r\n          // 函数名\r\n          let funcName: string;\r\n          // 函数参数\r\n          let args: any[];\r\n          if (value.includes(\"(\")) {\r\n            // 带参数的函数\r\n            let index = value.indexOf(\"(\");\r\n            funcName = value.substr(0, index);\r\n            args = value\r\n              .substr(index, value.length - 2)\r\n              .replace(/(^\\(*)|(\\))/g, \"\")\r\n              .split(\",\")\r\n              .map(a => a.trim());\r\n          } else {\r\n            funcName = value;\r\n          }\r\n          childNode.addEventListener(eventName, function(e) {\r\n            args = args.map(el => (el === \"$event\" ? e : el));\r\n            if (funcName in _result) {\r\n              return _result[funcName](...args);\r\n            }\r\n          });\r\n        }\r\n        if (tempvarp(name)) {\r\n          // 模板变量 #input\r\n          templateVariables[name.replace(/^#/, \"\")] = childNode;\r\n        } else {\r\n          // l(\"绑定的静态数据\", attrName)\r\n        }\r\n\r\n        // TODO 处理for指令\r\n        // ! 插值表达式被提前处理为 undefined\r\n        const forInstruction: string = instructionPrefix + \"for\";\r\n        if (name === forInstruction) {\r\n          // 解析for指令的值\r\n          let [varb, d] = value.split(\"in\").map(s => s.trim());\r\n          if (!varb) return null;\r\n          if (!isNaN(+d)) {\r\n            const fragment = document.createDocumentFragment();\r\n            (childNode as HTMLElement).removeAttribute(forInstruction);\r\n            for (let index = 0; index < +d; index++) {\r\n              const item = childNode.cloneNode(true);\r\n              define(item as HTMLElement, {\r\n                state: {\r\n                  ...model.state,\r\n                  [varb]: index\r\n                },\r\n                actions: model.actions,\r\n                computeds: model.computeds\r\n              });\r\n              fragment.append(item);\r\n            }\r\n            childNode.replaceWith(fragment);\r\n          } else {\r\n          }\r\n        }\r\n      }\r\n\r\n      // 递归遍历\r\n      if (depath && Array.from(childNode.childNodes).length) {\r\n        define(htmlElement, model);\r\n      }\r\n    } else if (childNode.nodeType === Node.TEXT_NODE) {\r\n      // 插值表达式 {{ name }} {{ obj.age }}\r\n      if (childNode.textContent) {\r\n        const exp = /{{([\\w\\s\\.][\\s\\w\\.]+)}}/g;\r\n        if (exp.test(childNode.textContent)) {\r\n          const _initTextContent = childNode.textContent;\r\n          autorun(() => {\r\n            const text = _initTextContent.replace(exp, function(match) {\r\n              var key = Array.prototype.slice\r\n                .call(arguments, 1)[0]\r\n                .replace(/\\s/g, \"\");\r\n              let keys = key.split(\".\");\r\n              let data: any;\r\n              // 在data中找数据\r\n              for (const el of keys) {\r\n                data = data ? data[el] : _result[el];\r\n              }\r\n\r\n              // 没有在data中找到数据, 寻找模板变量里面\r\n              if (data === undefined) {\r\n                // TODO 模板变量双向绑定\r\n                const isTemplateVariables = keys[0] in templateVariables;\r\n                if (isTemplateVariables) {\r\n                  for (const el of keys) {\r\n                    data = data ? data[el] : templateVariables[el];\r\n                  }\r\n                }\r\n              }\r\n              return data;\r\n            });\r\n            childNode.textContent = text;\r\n          });\r\n        }\r\n      }\r\n    }\r\n  }\r\n  return _result;\r\n}\r\n"],"names":[],"mappings":"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"}